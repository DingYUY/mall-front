import{a as m}from"./axios-a900fd7e.js";import{r as x}from"./index-888bc847.js";import{_ as k}from"./_plugin-vue_export-helper-c27b6911.js";import{u as b,a as y}from"./use-message-31edf5b3.js";import{r as C,a as j,o as N,e as a,a3 as c,g as B,w as l,F as I,a7 as S,N as w,Q as n,a6 as s,a5 as i,f as _,a4 as p}from"./runtime-core.esm-bundler-36726079.js";import{_ as V}from"./Button-6285efa0.js";import"./context-84471831.js";import"./create-injection-key-b5917821.js";import"./light-f42f174c.js";import"./icon-switch.cssr-a87b313c.js";import"./runtime-dom.esm-bundler-af906a5a.js";import"./FadeInExpandTransition-c7e27747.js";const $={class:"w-full p-2 h-full bg-cover bg-no-repeat overflow-hidden overflow-y-scroll",style:{"background-image":"url('/bg_deatied.png')"}},O=["src"],D={class:"pingfang_jian ml-3 w-44 overflow-hidden overflow-ellipsis whitespace-nowrap"},F={class:"pingfang_jian text-gray-500 text-xs w-44 break-all"},M={class:"pingfang_jian text-gray-500 text-xs w-44 break-all mr-6"},E={class:"pingfang_jian text-gray-500 text-xs w-44 overflow-ellipsis overflow-hidden whitespace-nowrap hover:whitespace-pre-wrap"},L={__name:"index",setup(Q){const d=b();y();let u=C(),g=j([]);u.value=localStorage.getItem("id"),m.post("/getOrder",{shop_id:localStorage.getItem("id")}).then(t=>{console.log(t),(t.data.code=1)&&g.push(...t.data.data)}),N(()=>{localStorage.getItem("token")||(d.warning("请先登录"),x.push("/login"))});function f(t,r){m.post("/editOrder",{_id:t,status:r}).then(o=>{console.log(o),o.data.code==1?d.success("操作成功"):d.error("操作失败"),window.location.reload()})}return(t,r)=>{const o=V;return a(),c("div",$,[B(o,{onClick:r[0]||(r[0]=e=>t.$router.back())},{default:l(()=>[n("返回")]),_:1}),(a(!0),c(I,null,S(w(g),(e,v)=>(a(),c("div",{class:"flex items-center w-full m-2 pb-3 border-b",key:v},[s("img",{src:e.img[0],class:"w-20 h-20 object-cover ml-3",alt:""},null,8,O),s("div",D,i(e.goods_name),1),s("div",F,"总价:"+i(e.amount),1),s("div",M,"订单号:"+i(e.order_id),1),s("div",E,"地址:"+i(e.custorm_address),1),e.status==0?(a(),_(o,{key:0,class:"ml-3",onClick:h=>f(e._id,1)},{default:l(()=>[n("发货")]),_:2},1032,["onClick"])):p("",!0),e.status==1?(a(),_(o,{key:1,class:"ml-3",onClick:h=>f(e._id,2),disabled:w(u)!=e.user_id},{default:l(()=>[n("收货")]),_:2},1032,["onClick","disabled"])):p("",!0),e.status==2?(a(),_(o,{key:2,class:"ml-3"},{default:l(()=>[n("订单完成")]),_:1})):p("",!0)]))),128))])}}},X=k(L,[["__scopeId","data-v-d7d6fa61"]]);export{X as default};
