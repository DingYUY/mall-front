import{u as U,r as w,f as b,o as q,g as c,a as g,c as m,e as s,h as a,w as n,bw as k,b as l,F as z,i as D,ae as I,bu as T,b6 as E,t as v,bx as F}from"./index-953b23c6.js";import{_ as L}from"./Radio-3cf275e3.js";import{u as P}from"./use-message-37081a3e.js";import{u as G}from"./composables-3e6ed2ea.js";import{_ as J}from"./Input-e5c21a65.js";import{a as K,_ as O}from"./FormItem-2ba5ccbf.js";import"./use-merged-state-b9c9e241.js";import"./Eye-53aa542d.js";const Q={class:"w-full p-2"},W={class:"flex justify-between"},X={class:"flex"},Y={class:"w-full pingfang_jian mb-4 border p-2"},Z={class:"text-purple-500 font-bold"},e3={class:"text-xs mt-2 text-gray-500 mb-2"},s3={class:"text-xs text-gray-400"},t3=s("svg",{t:"1672411898295",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"12594",width:"24",height:"24"},[s("path",{d:"M512 554.666667a234.666667 234.666667 0 1 1 0-469.333334 234.666667 234.666667 0 0 1 0 469.333334z m0-42.666667a192 192 0 1 0 0-384 192 192 0 0 0 0 384z",fill:"#4E4E4E","p-id":"12595"}),s("path",{d:"M512 554.666667h-85.333333c-117.802667 0-213.333333 138.197333-213.333334 256v42.666666h298.666667v42.666667H170.666667v-85.333333c0-141.397333 114.602667-298.666667 256-298.666667h85.333333v42.666667z",fill:"#4E4E4E","p-id":"12596"}),s("path",{d:"M597.333333 640h256v42.666667h-256zM597.333333 682.666667h42.666667v42.666666h-42.666667zM810.666667 682.666667h42.666666v42.666666h-42.666666zM597.333333 725.333333h256v42.666667h-256zM512 853.333333h384v42.666667h-384z",fill:"#4E4E4E","p-id":"12597"})],-1),a3=s("svg",{t:"1672411945378",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"14586",width:"24",height:"24"},[s("path",{d:"M341.333333 896H256V128h512v768H341.333333z m0-85.333333h341.333334V213.333333H341.333333v597.333334z m85.333334-42.666667v-85.333333h170.666666v85.333333h-170.666666z",fill:"#444444","p-id":"14587"})],-1),o3=s("svg",{t:"1672412038743",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"15654",width:"24",height:"24"},[s("path",{d:"M511.744 68.266667c-173.5168 0-314.026667 136.311467-314.7776 305.937066 0 60.910933 18.1248 118.903467 51.7632 168.465067l3.293867 4.693333 1.911466 3.1744 1.570134 2.389334c1.058133 1.553067 2.184533 3.037867 3.447466 4.5056l0.785067 0.853333 200.174933 232.823467a68.266667 68.266667 0 0 0 103.645867-0.170667L762.641067 558.08l-1.314134 1.450667a50.346667 50.346667 0 0 0 5.341867-6.621867l1.536-2.3552c0.631467-0.989867 1.860267-3.072 1.826133-3.003733 35.293867-49.322667 55.0912-109.431467 55.825067-172.782934C825.856 204.9536 684.970667 68.266667 511.744 68.266667z m0 68.266666c135.970133 0 245.845333 106.5984 245.845333 237.824a235.400533 235.400533 0 0 1-43.9808 134.775467l-2.952533 4.676267-198.997333 232.789333-200.192-232.823467-1.928534-3.191466-0.989866-1.450667a230.229333 230.229333 0 0 1-43.3152-134.775467C265.8304 242.858667 375.415467 136.533333 511.744 136.533333z",fill:"#444444","p-id":"15655"}),s("path",{d:"M783.803733 714.734933a34.133333 34.133333 0 0 1 45.243734 10.018134l1.4336 2.2528 73.386666 125.730133a68.266667 68.266667 0 0 1-54.784 102.5536l-4.5568 0.119467-666.043733-3.6352a68.266667 68.266667 0 0 1-60.654933-98.850134l2.133333-3.9424 69.9392-119.261866a34.133333 34.133333 0 0 1 60.16 32.170666l-1.262933 2.3552-69.9392 119.261867 666.043733 3.6352-73.386667-125.730133a34.133333 34.133333 0 0 1 12.288-46.677334z",fill:"#444444","p-id":"15656"}),s("path",{d:"M512 243.950933a136.533333 136.533333 0 1 0 0.034133 273.1008A136.533333 136.533333 0 0 0 512 243.950933z m0 68.266667a68.266667 68.266667 0 1 1-0.034133 136.567467A68.266667 68.266667 0 0 1 512 312.2176z",fill:"#00B386","p-id":"15657"})],-1),n3=s("div",{class:""},null,-1),h3={__name:"index",setup(l3){const M=U(),_=P(),C=G();let d=w(!1),u=b([]),i=b({name:"",phone:"",address:""});const x=w(),y={name:{required:!0,message:"请输入姓名",trigger:"blur"},phone:{required:!0,trigger:["input","blur"],validator(o,e){if(e){if(!/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(e))return new Error("请输入正确的手机号")}else return new Error("请输入手机号")}},address:{required:!0,message:"请输入收货地址",trigger:"blur"}};q(()=>{localStorage.getItem("token")||(_.warning("请先登录"),M.push("/login")),c.post("/getAddress",{token:localStorage.getItem("token")}).then(o=>{u.push(...o.data.data),u.forEach(e=>{e.is_del=!1})})});function A(o){u.forEach(e=>{o==e?(e.is_default=!0,c.post("/setDefaultAddress",{_id:e._id})):e.is_default=!1})}function B(o,e){u.forEach(r=>{o==r?(r.is_del=!0,c.post("/delAddress",{id:r._id}).then(p=>{p.data.code==1&&u.splice(e,1)})):r.is_del=!1})}function $(){var o;(o=x.value)==null||o.validate(e=>{e?console.log(e):c.post("/addAddress",{token:localStorage.getItem("token"),name:i.name,phone:i.phone,address:i.address,is_default:!1}).then(r=>{r.data.code==1&&(_.success("添加成功"),u.push(r.data.data),d.value=!1)})})}function j(o,e){C.warning({title:"确定要添加地址吗？",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{$()},onNegativeClick:()=>{_.success("已取消")}})}return(o,e)=>{const r=I,p=L,f=J,h=K,V=O,H=F,N=T;return g(),m(z,null,[s("div",Q,[s("div",W,[a(r,{class:"pingfang_jian mb-7 rounded-xl",onClick:e[0]||(e[0]=t=>o.$router.back())},{default:n(()=>[E("Back")]),_:1}),s("div",X,[a(r,{class:"mr-3 rounded-xl",onClick:e[1]||(e[1]=t=>k(d)?d.value=!l(d):d=!l(d))},{default:n(()=>[E("新增地址")]),_:1})])]),(g(!0),m(z,null,D(l(u),(t,R)=>(g(),m("div",Y,[s("div",Z,"姓名:"+v(t.name),1),s("div",e3,"手机号:"+v(t.phone),1),s("div",s3,v(t.address),1),a(p,{class:"text-xs mt-3",label:"删除",onClick:S=>B(t,R),checked:t.is_del},null,8,["onClick","checked"]),a(p,{class:"text-xs mt-3",label:"默认地址",onClick:S=>A(t),checked:t.is_default},null,8,["onClick","checked"])]))),256))]),a(N,{show:l(d),"onUpdate:show":e[5]||(e[5]=t=>k(d)?d.value=t:d=t)},{default:n(()=>[a(H,{style:{width:"700px","background-image":"url('/bg_deatied.png')","background-size":"contain","background-repeat":"no-repeat"},title:"新增地址",bordered:!0,size:"huge",role:"dialog","aria-modal":"true"},{footer:n(()=>[s("div",{class:"flex justify-between"},[n3,s("div",{onClick:j,class:"rounded-xl cursor-pointer transition p-2 w-14 text-white pingfang_jian shadow-2xl active:scale-50 bg-purple-500 text-center"}," 提交")])]),default:n(()=>[a(V,{ref_key:"addressRef",ref:x,model:l(i),rules:y,"label-placement":"left"},{default:n(()=>[a(h,{path:"name"},{default:n(()=>[a(f,{value:l(i).name,"onUpdate:value":e[2]||(e[2]=t=>l(i).name=t),placeholder:"请输入姓名",class:"w-1/2"},{prefix:n(()=>[t3]),_:1},8,["value"])]),_:1}),a(h,{path:"phone"},{default:n(()=>[a(f,{placeholder:"请输入手机号",value:l(i).phone,"onUpdate:value":e[3]||(e[3]=t=>l(i).phone=t)},{prefix:n(()=>[a3]),_:1},8,["value"])]),_:1}),a(h,{path:"address"},{default:n(()=>[a(f,{placeholder:"请输入地址",value:l(i).address,"onUpdate:value":e[4]||(e[4]=t=>l(i).address=t),type:"textarea",class:""},{prefix:n(()=>[o3]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])],64)}}};export{h3 as default};
