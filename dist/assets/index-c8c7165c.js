import{_ as y,r as p,f as x,o as b,a as w,c as F,e as n,h as m,w as S,b as l,g as r,A as o,ae as c,b6 as C,p as I,k as G}from"./index-953b23c6.js";import{u as N}from"./use-message-37081a3e.js";import{u as z}from"./composables-3e6ed2ea.js";import{_ as B}from"./DataTable-044bd614.js";import"./Eye-53aa542d.js";import"./Checkbox-40fa9567.js";import"./use-merged-state-b9c9e241.js";import"./Radio-3cf275e3.js";import"./Tooltip-b27f7136.js";import"./Input-e5c21a65.js";import"./ChevronRight-fb879e51.js";const g=s=>(I("data-v-2e722f47"),s=s(),G(),s),V={class:"goods-manage"},$={class:"title"},j=g(()=>n("div",null,"商品管理",-1)),A=g(()=>n("div",null,null,-1)),M={class:"overflow-hidden overflow-y-scroll"},T={__name:"index",setup(s){const d=N();z();let i=p();const a=()=>{r.post("/getAllGoods").then(t=>{t.data&&(i.value=t.data.data,console.log(i.value))})},u=x({page:1,pageSize:5,onChange:t=>{u.page=t,a()}}),f=({ban:t})=>[{title:"商品图片",key:"img",render(e){return o("div",{class:["flex","justify-center","items-center"]},[o("img",{src:e.img[0]?e.img[0]:"",class:["w-20","h-20","object-cover","ml-4"]})])}},{title:"商品名",key:"name"},{title:"简介",key:"introduce"},{title:"价格",key:"price"},{title:"商家名",key:"username"},{title:"发货地址",key:"address"},{title:"学号",key:"studentId"},{title:"姓名",key:"studentName"},{title:"审核状态",key:"status",render(e){return o("span",{innerText:e.reviewStatus===0?"待审核":e.reviewStatus===1?"审核通过":"审核拒绝"})}},{title:"操作",key:"_id",render(e){return o("div",null,[o(c,{strong:!0,tertiary:!0,style:{color:"white","background-color":"#FFF0F0","margin-left":"5px"},size:"small",onClick:()=>k(e)},{default:()=>"通过"}),o(c,{strong:!0,tertiary:!0,style:{color:"white","background-color":"#FFF0F0","margin-left":"5px"},size:"small",onClick:()=>v(e)},{default:()=>"拒绝"})])}}],_=p();_.value=f({});const k=t=>{console.log("row",t),r.post("/checkGoods",{id:t._id,reviewStatus:1}).then(e=>{console.log(e),d.success("审核通过"),a()})},v=t=>{console.log("row",t),r.post("/checkGoods",{id:t._id,reviewStatus:2}).then(e=>{console.log(e),d.success("拒绝通过"),a()})};return b(()=>{a()}),(t,e)=>{const h=B;return w(),F("div",V,[n("div",$,[m(l(c),{class:"back-button",onClick:e[0]||(e[0]=D=>t.$router.back())},{default:S(()=>[C("返回")]),_:1}),j,A]),n("div",M,[m(h,{columns:l(_),data:l(i),pagination:u,bordered:!1},null,8,["columns","data","pagination"])])])}}},W=y(T,[["__scopeId","data-v-2e722f47"]]);export{W as default};
