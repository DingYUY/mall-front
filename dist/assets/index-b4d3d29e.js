import{u as v,f as h,r as b,a as y,c as j,e as s,h as n,w as i,b as l,g as k,ba as p,bb as c}from"./index-953b23c6.js";import{_ as B}from"./welcome_login-b9ad3c0e.js";import{_ as I,a as S}from"./FormItem-2ba5ccbf.js";import{_ as M}from"./Input-e5c21a65.js";import{u as C}from"./use-message-37081a3e.js";import{u as K}from"./composables-3e6ed2ea.js";import"./Eye-53aa542d.js";import"./use-merged-state-b9c9e241.js";const q={class:"w-full flex justify-center items-center"},F=s("img",{src:B,class:"w-72 h-72",alt:""},null,-1),N={class:"flex flex-col ml-24"},U=s("div",{class:"pingfang_jian mb-5 font-bold text-purple-700"},"登录",-1),L={__name:"index",setup(V){const d=v();let t=h({name:"",password:""});const _=b(),g={name:{required:!0,trigger:"blur",message:"请输入账号"},password:{required:!0,trigger:"blur",message:"请输入密码"}},o=C();K();function f(){k.post("/login",{name:t.name,password:t.password}).then(e=>{console.log(e),e.data.code==1?e.data.data.isBan===!1&&e.data.data.status===1?(o.success("登录成功"),localStorage.setItem("token",e.data.data.password),localStorage.setItem("name",e.data.data.name),localStorage.setItem("id",e.data.data._id),localStorage.setItem("head_img",e.data.data.img_head),localStorage.setItem("isManager",e.data.data.isManager),localStorage.setItem("phone",e.data.data.phone),d.push("/")):e.data.data.isBan===!1&&e.data.data.status===0?o.error("该用户正在审核中"):e.data.data.isBan===!1&&e.data.data.status===2?o.error("该用户审核未通过"):o.error("该用户已被封禁"):o.warning(e.data.msg)})}function x(){d.push("/register")}return(e,a)=>{const u=M,m=S,w=I;return y(),j("div",q,[F,s("div",N,[U,n(w,{ref_key:"loginForm",ref:_,model:l(t),rules:g,"label-placement":"left"},{default:i(()=>[n(m,{path:"name",label:"账号:"},{default:i(()=>[n(u,{value:l(t).name,"onUpdate:value":a[0]||(a[0]=r=>l(t).name=r),class:"bg-gray-100 text-xs outline-0 rounded-xl",placeholder:"请输入昵称...",onKeydown:a[1]||(a[1]=p(c(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),n(m,{path:"password",label:"密码:"},{default:i(()=>[n(u,{value:l(t).password,"onUpdate:value":a[2]||(a[2]=r=>l(t).password=r),type:"password",class:"bg-gray-100 text-xs outline-0 rounded-xl",placeholder:"请输入密码...","show-password-on":"mousedown",onKeydown:a[3]||(a[3]=p(c(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1})]),_:1},8,["model"]),s("div",{class:"flex w-full"},[s("div",{onClick:x,class:"w-24 h-8 mt-4 active:scale-75 transition duration-500 ease-in-out text-white pingfang_jian flex justify-center items-center rounded-xl text-xs cursor-pointer bg-blue-400"},"注册 "),s("div",{onClick:f,class:"w-24 h-8 mt-4 ml-24 active:scale-75 transition duration-500 ease-in-out text-white pingfang_jian flex justify-center items-center rounded-xl text-xs cursor-pointer bg-purple-700"},"登录 ")])])])}}};export{L as default};
