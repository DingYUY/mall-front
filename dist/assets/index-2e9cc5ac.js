import{_ as C,u as B,r as g,f as T,o as I,a as M,c as N,e as d,h as u,w as m,b as i,g as l,A as s,ae as n,b6 as k,p as w,k as z}from"./index-953b23c6.js";import{_ as S}from"./DataTable-044bd614.js";import{u as U}from"./use-message-37081a3e.js";import{u as V}from"./composables-3e6ed2ea.js";import"./Eye-53aa542d.js";import"./Checkbox-40fa9567.js";import"./use-merged-state-b9c9e241.js";import"./Radio-3cf275e3.js";import"./Tooltip-b27f7136.js";import"./Input-e5c21a65.js";import"./ChevronRight-fb879e51.js";const $=a=>(w("data-v-c3874b39"),a=a(),z(),a),A={class:"manage"},D={class:"title"},E=$(()=>d("div",null,"用户管理",-1)),G={class:"overflow-hidden overflow-y-scroll"},L={__name:"index",setup(a){const h=B(),r=U(),f=V();let c=g();const o=()=>{l.post("/getAllUser").then(t=>{c.value=t.data.data,console.log(c.value)})},p=T({page:1,pageSize:10,onChange:t=>{p.page=t,o()}}),v=()=>{h.push("/goods_manage")},y=({ban:t})=>[{title:"账户",key:"name"},{title:"是否管理员",key:"isManager",render(e){return s("span",{innerText:e.isManager?"管理员":"普通用户"})}},{title:"状态",key:"isBan",render(e){return s("span",{innerText:e.isBan?"封禁中":"正常",style:e.isBan?{color:"red"}:{}})}},{title:"学号",key:"studentId"},{title:"姓名",key:"studentName"},{title:"身份证号码",key:"idCard"},{title:"手机号码",key:"phone"},{title:"注册状态",key:"status",render(e){return s("span",{innerText:e.status===0?"待审核":e.status===1?"审核通过":"审核拒绝"})}},{title:"操作",key:"_id",render(e){return s("div",null,[s(n,{strong:!0,tertiary:!0,style:{color:"white","background-color":"#FFF0F0"},size:"small",onClick:()=>t(e)},{default:()=>"封禁"}),s(n,{strong:!0,tertiary:!0,style:{color:"white","background-color":"#FFF0F0","margin-left":"5px"},size:"small",onClick:()=>b(e)},{default:()=>"审核"}),s(n,{strong:!0,tertiary:!0,style:{color:"white","background-color":"#FFF0F0","margin-left":"5px"},size:"small",onClick:()=>x(e)},{default:()=>"拒绝"})])}}],_=g();_.value=y({ban(t){console.log("row",t),l.post("/ban",{id:t._id,name:t.name,isBan:!0}).then(e=>{f.warning({title:"确定要封禁该用户吗？",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{console.log(e),r.success("成功"),o()},onNegativeClick:()=>{r.error("已取消")}})})}});const b=t=>{console.log("row",t),l.post("/checkUser",{id:t._id,status:1}).then(e=>{console.log(e),r.success("审核成功"),o()})},x=t=>{console.log("row",t),l.post("/checkUser",{id:t._id,status:2}).then(e=>{console.log(e),r.success("拒绝成功"),o()})};return I(()=>{o()}),(t,e)=>{const F=S;return M(),N("div",A,[d("div",D,[u(i(n),{class:"back-button",onClick:e[0]||(e[0]=P=>t.$router.back())},{default:m(()=>[k("返回")]),_:1}),E,u(i(n),{class:"back-button",onClick:v},{default:m(()=>[k("商品管理")]),_:1})]),d("div",G,[u(F,{columns:i(_),data:i(c),pagination:p,bordered:!1},null,8,["columns","data","pagination"])])])}}},Z=C(L,[["__scopeId","data-v-c3874b39"]]);export{Z as default};
