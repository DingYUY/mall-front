import{b as k}from"./axios-bce995d2.js";import{u as y}from"./vue-router-cc2f438c.js";import{_ as b}from"./_plugin-vue_export-helper-c27b6911.js";import{u as C}from"./use-message-2eb0c123.js";import{u as j}from"./composables-3ea61539.js";import{r as N,a as S,o as $,e as t,a3 as f,g as I,w as l,F as B,a7 as O,N as n,Q as i,a6 as a,a5 as d,f as c,a4 as _}from"./runtime-core.esm-bundler-7390d31c.js";import{_ as V}from"./Button-c8fa1eb4.js";import"./create-injection-key-b5917821.js";import"./context-622e1fe5.js";import"./light-cdcf3c6d.js";import"./icon-switch.cssr-65c211ab.js";import"./runtime-dom.esm-bundler-7e1f654a.js";import"./FadeInExpandTransition-ffe10ded.js";const M={class:"w-full p-2 h-full bg-cover bg-no-repeat overflow-hidden overflow-y-scroll",style:{"background-image":"url('/bg_deatied.png')"}},D=["src"],F={class:"pingfang_jian ml-3 w-44 overflow-hidden overflow-ellipsis whitespace-nowrap"},E={class:"pingfang_jian text-gray-500 text-xs w-44 break-all"},J={class:"pingfang_jian text-gray-500 text-xs w-44 break-all mr-6"},L={class:"pingfang_jian text-gray-500 text-xs w-44 overflow-ellipsis overflow-hidden whitespace-nowrap hover:whitespace-pre-wrap"},Q={class:"pingfang_jian text-gray-500 text-xs w-44 overflow-ellipsis overflow-hidden whitespace-nowrap hover:whitespace-pre-wrap"},R={style:{width:"30%"}},T={__name:"index",setup(q){const u=C();j();const h=y();let r=N(),m=S([]);r.value=localStorage.getItem("id"),k.post("/getOrder",{shop_id:localStorage.getItem("id")}).then(s=>{console.log(s),(s.data.code=1)&&m.push(...s.data.data)}),$(()=>{localStorage.getItem("token")||(u.warning("请先登录"),h.push("/login"))});function w(s,p){k.post("/editOrder",{_id:s,status:p}).then(o=>{console.log(o),o.data.code==1?u.success("操作成功"):u.error("操作失败"),window.location.reload()})}function v(s){localStorage.setItem("orderMessage",JSON.stringify(s)),h.push({path:"/chat"})}return(s,p)=>{const o=V;return t(),f("div",M,[I(o,{onClick:p[0]||(p[0]=e=>s.$router.back())},{default:l(()=>[i("返回")]),_:1}),(t(!0),f(B,null,O(n(m),(e,x)=>(t(),f("div",{class:"flex items-center w-full m-2 pb-3 border-b",key:x},[a("img",{src:e.img[0],class:"w-20 h-20 object-cover ml-3",alt:""},null,8,D),a("div",F,d(e.goods_name),1),a("div",E,"总价:"+d(e.amount),1),a("div",J,"订单号:"+d(e.order_id),1),a("div",L," 地址:"+d(e.custorm_address.split("_")[0]),1),a("div",Q," 电话:"+d(e.custorm_address.split("_")[1]),1),a("div",R,[e.user_id===n(r)?(t(),c(o,{key:0,class:"ml-3",onClick:g=>v(e)},{default:l(()=>[i("联系卖家")]),_:2},1032,["onClick"])):_("",!0),e.shop_id===n(r)?(t(),c(o,{key:1,class:"ml-3",onClick:g=>v(e)},{default:l(()=>[i("联系买家")]),_:2},1032,["onClick"])):_("",!0),e.status==0&&e.shop_id===n(r)?(t(),c(o,{key:2,class:"ml-3",onClick:g=>w(e._id,1)},{default:l(()=>[i("发货")]),_:2},1032,["onClick"])):_("",!0),e.status==1&&e.user_id===n(r)?(t(),c(o,{key:3,class:"ml-3",onClick:g=>w(e._id,2),disabled:n(r)!=e.user_id},{default:l(()=>[i("收货")]),_:2},1032,["onClick","disabled"])):_("",!0),e.status==2?(t(),c(o,{key:4,class:"ml-3"},{default:l(()=>[i("订单完成")]),_:1})):_("",!0)])]))),128))])}}},oe=b(T,[["__scopeId","data-v-d428ea8a"]]);export{oe as default};
